CREATE TABLE Contracts (
    ID                           INTEGER  NOT NULL
                                          UNIQUE
                                          PRIMARY KEY AUTOINCREMENT,
    title                        STRING   NOT NULL,
    marker                       INTEGER  NOT NULL
                                          REFERENCES Marker (ID),
    number                       INTEGER  NOT NULL,
    start_date                   DATETIME NOT NULL,
    end_date                     DATETIME NOT NULL,
    transferred_to_production    BOOLEAN  NOT NULL,
    file                         STRING,
    material_is_purchased        BOOLEAN  NOT NULL,
    produced                     BOOLEAN  NOT NULL,
    painted                      BOOLEAN  NOT NULL,
    completed                    BOOLEAN  NOT NULL,
    salary_is_taken_into_account BOOLEAN  NOT NULL
);
CREATE TABLE Employees (
    ID              INTEGER PRIMARY KEY AUTOINCREMENT
                            NOT NULL
                            UNIQUE,
    name            STRING  UNIQUE
                            NOT NULL,
    position        STRING,
    hashed_password STRING  NOT NULL,
    login           STRING  NOT NULL
                            UNIQUE,
    firebase_token  STRING  UNIQUE
);
CREATE TABLE EmployeesContracts (
    EmployeeID INTEGER REFERENCES Employees (ID),
    ContractID INTEGER REFERENCES Contracts (ID)
);
CREATE TABLE Marker (
    ID   INTEGER     PRIMARY KEY AUTOINCREMENT
                     UNIQUE
                     NOT NULL,
    type STRING (10) UNIQUE
                     NOT NULL
);
CREATE TABLE AssignmentRequests (
    ID          TEXT     PRIMARY KEY,
    EmployeeID  TEXT     NOT NULL,
    ContractID  TEXT     NOT NULL,
    Status      TEXT     NOT NULL
                         DEFAULT 'PENDING',
    RequestedAt DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (
        EmployeeID
    )
    REFERENCES Employees (ID),
    FOREIGN KEY (
        ContractID
    )
    REFERENCES Contracts (ID)
);
